<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Health Care Center</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
</head>

<style>
    body {
        margin: 0;
        padding-bottom: 50px;
        /* Ensure content doesn't get hidden under the footer */
    }

    footer {
        width: 100%;
        background-color: #333;
        color: white;
        padding: 20px 0;
        text-align: center;
    }

    .footer-container {
        max-width: 1200px;
        margin: 0 auto;
    }

    .footer-text {
        font-size: 18px;
    }

    .heart {
        color: red;
        font-size: 24px;
    }

    .name {
        font-weight: bold;
        color: #ff9800;
        /* Customize the color of the name */
    }

    .social-media {
        margin-top: 10px;
    }

    .social-icon {
        margin: 0 10px;
        text-decoration: none;
        color: white;
        font-size: 20px;
    }

    .social-icon:hover {
        color: #ff9800;
        /* Change color on hover */
    }

    /* Optional: You can use FontAwesome icons or add your own icons */
    .social-icon.github::before {
        content: "\f09b";
        /* Unicode for GitHub icon */
        font-family: 'FontAwesome';
    }

    .social-icon.linkedin::before {
        content: "\f0e1";
        /* Unicode for LinkedIn icon in FontAwesome */
        font-family: 'FontAwesome';
    }

    .social-icon.instagram::before {
        content: "\f16d";
        /* Unicode for Instagram icon in FontAwesome */
        font-family: 'FontAwesome';
    }
</style>


<body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container-fluid justify-content-center">
            <a class="navbar-brand" onclick="window.location.href='/'" style="cursor: pointer;">
                HealthMate - AI
            </a>
        </div>
    </nav>




    <!-- main form of page -->
    <div class="container my-4 mt-4" style="background: black; color: white; border-radius: 15px; padding: 40px;">
        <form action="/predict" method="post">
            <div class="form-group">
                <label for="symptoms">Select Symptoms:</label>
                <input type="text" class="form-control" , id="symptoms" name="symptoms"
                    placeholder="type systems such as itching, shivering, aching etc">

            </div>
            <br>
            <button type="button" id="startSpeechRecognition" class="btn btn-primary"
                style="margin-left:3px; margin-bottom: 2rem; border:1px solid white; border-radius:20px;">
                Start Speech Recognition
            </button>
            <a href="/document" target="_blank" class="btn btn-primary"
                style="margin-left:3px; margin-bottom: 2rem; border:1px solid white; border-radius:20px;">
                Documentation
            </a>



            {% if error %}
            <p>{{ error }}</p>
            {% endif %}


            <button onclick="displayUserInput()" type="submit" class="btn btn-danger btn-lg"
                style="width: 100%; padding: 14px; margin-bottom: 5px;">Predict</button>
        </form>
    </div>








    {% if predicted_disease %}

    <!-- Results -->
    <h1 class="text-center my-4 mt-4">Our AI System Results for {% if message %}
        <em>{{ message }}</em>
        {% endif %}
    </h1>
    <div class="container">

        <div class="result-container">
            <!-- Buttons to toggle display -->
            <button class="toggle-button" data-bs-toggle="modal" data-bs-target="#diseaseModal"
                style="padding:4px;  margin: 5px 40px 5px 0; font-size:20px;font-weight:bold; width:140px; border-radius:5px; background:#F39334;color:black;">Disease</button>
            <button class="toggle-button" data-bs-toggle="modal" data-bs-target="#descriptionModal"
                style="padding:4px; margin: 5px 40px 5px 0; font-size:20px;font-weight:bold; width:140px; border-radius:5px; background:#268AF3 ;color:black;">Description</button>
            <button class="toggle-button" data-bs-toggle="modal" data-bs-target="#precautionModal"
                style="padding:4px; margin: 5px 40px 5px 0; font-size:20px;font-weight:bold; width:140px; border-radius:5px; background:#F371F9 ;color:black;">Precaution</button>
            <button class="toggle-button" data-bs-toggle="modal" data-bs-target="#medicationsModal"
                style="padding:4px; margin: 5px 40px 5px 0; font-size:20px;font-weight:bold; width:140px;border-radius:5px; background:#F8576F ;color:black;">Medications</button>
            <button class="toggle-button" data-bs-toggle="modal" data-bs-target="#workoutsModal"
                style="padding:4px; margin: 5px 40px 5px 0; font-size:20px;font-weight:bold; width:140px; border-radius:5px; background:#99F741 ;color:black;">Workouts</button>
            <button class="toggle-button" data-bs-toggle="modal" data-bs-target="#dietsModal"
                style="padding:4px; margin: 5px 40px 5px 0; font-size:20px;font-weight:bold; width:140px; border-radius:5px; background:#E5E23D;color:black;">Diets</button>
        </div>
    </div>

    {% endif %}

    <!-- Disease Modal -->
    <div class="modal fade" id="diseaseModal" tabindex="-1" aria-labelledby="diseaseModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header" style="background-color: #020606; color:white;">
                    <!-- Set header background color inline -->
                    <h5 class="modal-title" id="diseaseModalLabel">Predicted Disease</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <!-- Set modal body background color inline -->
                    <p>{{ predicted_disease }}</p>
                </div>
            </div>
        </div>
    </div>


    <!-- Description Modal -->
    <div class="modal fade" id="descriptionModal" tabindex="-1" aria-labelledby="descriptionModalLabel"
        aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header" style="background-color: #020606; color:white;">
                    <h5 class="modal-title" id="descriptionModalLabel">Description</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p>{{ dis_des }}</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Precaution Modal -->
    <div class="modal fade" id="precautionModal" tabindex="-1" aria-labelledby="precautionModalLabel"
        aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header" style="background-color: #020606; color:white;">
                    <h5 class="modal-title" id="precautionModalLabel">Precaution</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <ul>
                        {% for i in my_precautions %}
                        <li>{{ i }}</li>
                        {% endfor %}
                    </ul>
                </div>
            </div>
        </div>
    </div>




    <!-- Medications Modal -->
    <div class="modal fade" id="medicationsModal" tabindex="-1" aria-labelledby="medicationsModalLabel"
        aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header" style="background-color: #020606; color:white;">
                    <h5 class="modal-title" id="medicationsModalLabel">Medications</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <ul>
                        {% for i in medications %}
                        <li>{{ i }}</li>
                        {% endfor %}
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- Workouts Modal -->
    <div class="modal fade" id="workoutsModal" tabindex="-1" aria-labelledby="workoutsModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header" style="background-color: #020606; color:white;">
                    <h5 class="modal-title" id="workoutsModalLabel">Workouts</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <ul>
                        {% for i in workout %}
                        <li>{{ i }}</li>
                        {% endfor %}
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- Diets Modal -->
    <div class="modal fade" id="dietsModal" tabindex="-1" aria-labelledby="dietsModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header" style="background-color: #020606; color:white;">
                    <h5 class="modal-title" id="dietsModalLabel">Diets</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <ul>
                        {% for i in my_diet %}
                        <li>{{ i }}</li>
                        {% endfor %}
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <footer>
        <div class="footer-container">
            <p class="footer-text">
                Made with <span class="heart">&#10084;</span> by <span class="name">Ishan Hirani</span>
            </p>
            <div class="social-media">
                <a href="https://github.com/ishanhirani" target="_blank" class="social-icon github">GitHub</a>
                <a href="https://www.linkedin.com/in/ishanhirani/" target="_blank"
                    class="social-icon linkedin">LinkedIn</a>
                <a href="https://www.instagram.com/ishan_hirani/" target="_blank"
                    class="social-icon instagram">Instagram</a>
            </div>
        </div>
    </footer>




    <!-- Font Awesome for Social Icons -->
    <script src="https://kit.fontawesome.com/a076d05399.js"></script>

    <script>
        const startSpeechRecognitionButton = document.getElementById('startSpeechRecognition');
        const symptomsInput = document.getElementById('symptoms');

        startSpeechRecognitionButton.addEventListener('click', startSpeechRecognition);
        startSpeechRecognitionButton.addEventListener('touchstart', startSpeechRecognition);

        function startSpeechRecognition() {
            // Check if SpeechRecognition or webkitSpeechRecognition is available
            const SpeechRecognition =
                window.SpeechRecognition || window.webkitSpeechRecognition;
            if (!SpeechRecognition) {
                alert('Speech recognition is not supported in your browser. Please use Google Chrome.');
                return;
            }

            const recognition = new SpeechRecognition();
            recognition.lang = 'en-US'; // Set the language for recognition

            // Change the placeholder to "Listening..." when recognition starts
            recognition.onstart = function () {
                symptomsInput.placeholder = 'Listening...';
            };

            recognition.onresult = function (event) {
                const result = event.results[0][0].transcript;
                const formattedResult = result
                    .toLowerCase() // Convert to lowercase
                    .split(' ') // Split the recognized text into words
                    .join(', ') // Join words with a comma and space
                    .replace(/\.$/, ''); // Remove the full stop at the end, if any

                symptomsInput.value = formattedResult; // Set the formatted result as the value of the input
            };

            // Reset the placeholder when recognition ends
            recognition.onend = function () {
                symptomsInput.placeholder = 'Enter symptoms here';
                console.log('Speech recognition ended.');
            };

            // Handle errors during speech recognition
            recognition.onerror = function (event) {
                console.error('Speech recognition error:', event.error);
                alert(`Speech recognition error: ${event.error}`);
            };

            // Check for microphone access before starting recognition
            navigator.mediaDevices
                .getUserMedia({ audio: true })
                .then(() => {
                    recognition.start(); // Start recognition if permission is granted
                })
                .catch((err) => {
                    console.error('Microphone access denied:', err);
                    alert('Microphone access is required for voice recognition to work.');
                });
        }


        function displayUserInput() {
            // Get user input
            const userInput = document.getElementById("symptoms").value;

            // Display input in the div
            document.getElementById("transcription").textContent = userInput;
        }
    </script>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm"
        crossorigin="anonymous"></script>

</body>

</html>